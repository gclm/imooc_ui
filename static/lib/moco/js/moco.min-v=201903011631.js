function Boxy(t,e){this.WRAPPER='<div class="moco-modal-overlay" ><div class="moco-modal-layer" >                    <div class="moco-modal-title"></div>                    <div class="moco-modal-inner"></div>            </div></div>',this.DEFAULTS={title:null,closeable:!0,draggable:!0,clone:!1,actuator:null,center:!0,show:!0,modal:!1,fixed:!0,unloadOnHide:!1,clickToFront:!1,behaviours:function(){},afterDrop:function(){},afterShow:function(){},afterHide:function(){},beforeUnload:function(){}},this.DEFAULT_X=50,this.DEFAULT_Y=50,this.overlay=$(this.WRAPPER),this.boxy=this.overlay.find(".moco-modal-layer"),$.data(this.overlay[0],"boxy",this),this.visible=!1,this.options=$.extend({},this.DEFAULTS,e||{}),this.options.modal&&(this.options=$.extend(this.options,{center:!0,draggable:!1})),this.options.actuator&&$.data(this.options.actuator,"active.boxy",this),this.setContent(t||"<div></div>"),this._setupTitleBar(),this.overlay.appendTo(document.body),this.toTop(),this.options.center&&Boxy._u(this.options.x,this.options.y)?this.center():this.moveTo(Boxy._u(this.options.x)?this.options.x:this.DEFAULT_X,Boxy._u(this.options.y)?this.options.y:this.DEFAULT_Y),this.options.show&&this.show()}Boxy.OriginalzIndex=900,Boxy.zIndex=900,Boxy.dragConfigured=!1,Boxy.resizeConfigured=!1,Boxy.dragging=null,Boxy.browser={mozilla:/firefox/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase())},Boxy.isModalVisible=function(){return $(".moco-modal-blackout").length>0},Boxy._u=function(){for(var t=0;t<arguments.length;t++)if("undefined"!=typeof arguments[t])return!1;return!0},Boxy._handleResize=function(t){var e=$(document);$(".moco-modal-blackout").css("display","none").css({width:e.width(),height:e.height()}).css("display","block")},Boxy._handleDrag=function(t){var e;if(e=Boxy.dragging){var o=$(window).width()-e[0].boxy.width(),i=$(window).height()-e[0].boxy.height(),r=t.pageX-e[1],n=t.pageY-e[2];r<=0&&(r=0),n<=0&&(n=0),r>=o&&(r=o),n>=i&&(n=i),e[0].boxy.stop().animate({left:r+"px",top:n+"px"},10)}},Boxy._nextZ=function(){return Boxy.zIndex++},Boxy._viewport=function(){var t=document.documentElement,e=document.body,o=window;return $.extend(Boxy.browser.msie?{left:e.scrollLeft||t.scrollLeft,top:e.scrollTop||t.scrollTop}:{left:o.pageXOffset,top:o.pageYOffset},Boxy._u(o.innerWidth)?Boxy._u(t)||Boxy._u(t.clientWidth)||0==t.clientWidth?{width:e.clientWidth,height:e.clientHeight}:{width:t.clientWidth,height:t.clientHeight}:{width:o.innerWidth,height:o.innerHeight})},Boxy.prototype={estimateSize:function(){this.boxy.css({visibility:"hidden",display:"block"});var t=this.getSize();return this.boxy.css("display","none").css("visibility","visible"),t},getSize:function(){return[this.boxy.width(),this.boxy.height()]},getContentSize:function(){var t=this.getContent();return[t.width(),t.height()]},getPosition:function(){var t=this.boxy[0];return[t.offsetLeft,t.offsetTop]},getCenter:function(){var t=this.getPosition(),e=this.getSize();return[Math.floor(t[0]+e[0]/2),Math.floor(t[1]+e[1]/2)]},getInner:function(){return $(".moco-modal-inner",this.boxy)},getTInner:function(){return $(".moco-modal-title",this.boxy)},getContent:function(){return this.boxy},setContent:function(t){return t=$(t).css({display:"block"}),this.options.clone&&(t=t.clone(!0)),this.getInner().append(t),this._setupDefaultBehaviours(t),this.options.behaviours.call(this,t),this},moveTo:function(t,e){return this.moveToX(t).moveToY(e),this},moveToX:function(t){return"number"==typeof t?this.boxy.css({left:t}):this.centerX(),this},moveToY:function(t){return"number"==typeof t?this.boxy.css({top:t}):this.centerY(),this},centerAt:function(t,e){var o=this[this.visible?"getSize":"estimateSize"]();return"number"==typeof t&&this.moveToX(t-o[0]/2),"number"==typeof e&&this.moveToY(e-o[1]/2),this},centerAtX:function(t){return this.centerAt(t,null)},centerAtY:function(t){return this.centerAt(null,t)},center:function(t){var e=Boxy._viewport(),o=this.options.fixed?[0,0]:[e.left,e.top];return t&&"x"!=t||this.centerAt(o[0]+e.width/2,null),t&&"y"!=t||this.centerAt(null,o[1]+e.height/2),this},centerX:function(){return this.center("x")},centerY:function(){return this.center("y")},resize:function(t){if(this.visible){t=t||{};var e=t.width||this.getInner().width(),o=t.height||this.getInner().height()+36,i=$(window).height(),r=this._getBoundsForResize(e,o);return this.boxy.css({left:r[0],top:r[1]}),this.getContent().css({width:r[2],height:r[3]}),t.after&&t.after(this),o>i?(this.boxy.addClass("fixed"),this.modalBlackout.css({width:$(document).width(),height:o+40})):this.center(),this}},tween:function(t,e,o){if(this.visible){var i=this._getBoundsForResize(t,e),r=this;return this.boxy.stop().animate({left:i[0],top:i[1]}),this.getContent().stop().animate({width:i[2],height:i[3]},function(){o&&o(r)}),this}},isVisible:function(){return this.visible},show:function(){if(!this.visible){if($(document.body).addClass("moco-modal-body"),this.options.modal){var t=this;Boxy.resizeConfigured||(Boxy.resizeConfigured=!0,$(window).resize(function(){Boxy._handleResize()})),$(".moco-modal-blackout").length?this.modalBlackout=$(".moco-modal-blackout").css({zIndex:Boxy._nextZ(),opacity:.7,width:$(document).width(),height:$(document).height()}):(Boxy.zIndex=Boxy.OriginalzIndex,this.modalBlackout=$('<div class="moco-modal-blackout js-moco-modal-cancel"></div>').css({zIndex:Boxy._nextZ(),opacity:.7,width:$(document).width(),height:$(document).height()}).appendTo(document.body)),this.toTop(),this.options.closeable&&$(document.body).bind("keypress.boxy",function(e){var o=e.which||e.keyCode;27==o&&(t.hide(),$(document.body).unbind("keypress.boxy"))})}var e=Boxy._viewport(),o=this[this.visible?"getSize":"estimateSize"]();return o[1]>e.height&&(this.boxy.addClass("fixed"),this.options.modal&&this.modalBlackout.css({width:e.width,height:e.height})),this.boxy.show(),this.overlay.stop().css({opacity:1}).show(),this.visible=!0,this._fire("afterShow"),this}},hide:function(t){if(this.visible){var e=this;if($(document.body).removeClass("moco-modal-body"),this.overlay.stop().css({display:"none"}),this.visible=!1,$(e.overlay).remove(),e._fire("afterHide"),t&&t(e),e.options.unloadOnHide&&e.unload(),e.options.modal){var o=e.getBigZ();o?e.modalBlackout.css({zIndex:o,width:$(document).width(),height:$(document).height()}):($(document.body).unbind("keypress.boxy"),e.modalBlackout.animate({opacity:0},100,function(){$(this).remove()}))}return e.options.closeCallback&&e.options.closeCallback(),this}},toggle:function(){return this[this.visible?"hide":"show"](),this},hideAndUnload:function(t){return this.options.unloadOnHide=!0,this.hide(t),this},unload:function(){this._fire("beforeUnload"),this.boxy.remove(),this.options.actuator&&$.data(this.options.actuator,"active.boxy",!1)},toTop:function(){var t=Boxy._nextZ();return this.boxy.css({zIndex:t}),this.overlay.css({zIndex:t}),this},getBigZ:function(){var t=1;return $.each($(".moco-modal-layer"),function(e,o){var i=1*$(o).css("zIndex");i>t&&(t=i)}),t-1},getTitle:function(){return $("> .moco-modal-title span",this.getInner()).html()},setTitle:function(t){return $("> .moco-modal-title span",this.getTInner()).html(t),this},_getBoundsForResize:function(t,e){var o=this.getContentSize(),i=[t-o[0],e-o[1]],r=this.getPosition();return[Math.max(r[0]-i[0]/2,0),Math.max(r[1]-i[1]/2,0),t,e]},_setupTitleBar:function(){if(this.options.title){var t=this,e=$("<div></div>").html("<span>"+this.options.title+"</span>");this.options.closeable&&e.append($("<a href='javascript:void(0)' class='moco-icon-close moco-modal-close js-modal-close'></a>").html(this.options.closeText)),this.options.draggable&&(e.addClass("moco-modal-draggable"),e[0].onselectstart=function(){return!1},e[0].unselectable="on",e[0].style.MozUserSelect="none",Boxy.dragConfigured||($(document).mousemove(Boxy._handleDrag),Boxy.dragConfigured=!0),e.mousedown(function(e){t.toTop(),Boxy.dragging=[t,e.pageX-t.boxy[0].offsetLeft,e.pageY-t.boxy[0].offsetTop],$(this).addClass("dragging")}),$(document).mouseup(function(){$(this).removeClass("dragging"),Boxy.dragging=null,t._fire("afterDrop")})),this.getTInner().prepend(e),this._setupDefaultBehaviours(e)}else this.getTInner().remove()},_setupDefaultBehaviours:function(t){var e=this;this.options.clickToFront&&t.click(function(){e.toTop()}),$(".js-modal-close",t).click(function(){return e.hide(),!1}).mousedown(function(t){t.stopPropagation()})},_fire:function(t){this.options[t].call(this)}},!function(t){"function"==typeof define&&"function"!=typeof jQuery?define(["jquery"],t):t(jQuery)}(function(t){t.extend({dialog:function(t,e){var o=$.extend({title:null,timeout:0,modal:!1,draggable:!0,callback:function(){}},e),i='<div class="moco-modal-dialog">'+t+"</div>",r=new Boxy(i,{title:o.title,modal:o.modal,draggable:o.draggable,closeCallback:o.callback});return 0!=o.timeout&&setTimeout(function(){r.hide(),o.callback()},o.timeout),(o.width||o.height)&&r.resize({width:o.width,height:o.height}),r},alert:function(t,e){var o='<div class="moco-modal-wrap">                    <p class="moco-modal-content js-modal-content">$content</p>                    $info                    <div class="moco-modal-btns">                        <a class="moco-btn moco-btn-dark js-modal-submit" onclick="return false" href="javascript:void(0)"><span>$submit</span></a>                    </div>                </div>',i=$.extend({submit:"确定",timeout:0,modal:!0,callback:function(){}},e),r=o.replace("$content",t);r=i.info?r.replace("$info",'<p class="moco-modal-info js-modal-info">'+i.info+"</p>"):r.replace("$info",""),r=r.replace("$submit",i.submit);var n=new Boxy(r,{modal:i.modal,draggable:!1,closeCallback:i.callback});return $(n.boxy).find("a.js-modal-submit").click(function(){n.hide(),i.callback()}),$(n.modalBlackout).click(function(){n.hide(),i.callback()}),0!=i.timeout&&setTimeout(function(){n.hide(),i.callback()},i.timeout),n},confirm:function(t,e){var o='<div class="moco-modal-wrap" node-type="outer">                        <p class="moco-modal-content js-modal-content">$content</p>                        $info                    <div class="moco-modal-btns">                        <a class="moco-btn moco-btn-line-g js-modal-cancel" onclick="return false" href="javascript:void(0)"><span>$cancel</span></a><a class="moco-btn moco-btn-dark js-modal-submit" onclick="return false" href="javascript:void(0)"><span>$submit</span></a>                    </div>                </div>',i=$.extend({submit:"确定",cancel:"取消",modal:!0,callback:function(){},cancelcallback:function(){}},e),r=o.replace("$content",t);r=i.info?r.replace("$info",'<p class="moco-modal-info js-modal-info">'+i.info+"</p>"):r.replace("$info",""),r=r.replace("$submit",i.submit).replace("$cancel",i.cancel);var n=new Boxy(r,{modal:i.modal,draggable:!1,closeCallback:i.CancelCallback});return $(n.boxy).find("a.js-modal-submit").click(function(){n.hide(),i.callback()}),$(n.boxy).find("a.js-modal-cancel").click(function(){n.hide(),i.cancelcallback()}),$(n.modalBlackout).click(function(){n.hide(),i.cancelcallback()}),n},prompt:function(t,e){var o=($(window).width(),$(window).height(),$(".moco-tip-layer").remove(),{success:"moco-icon-tick-revert",error:"moco-icon-point-revert",question:"moco-icon-ques-revert"}),e=$.extend({icon:"success",timeout:1e3,modal:!0,callback:function(){}},e),i="<div class='moco-prompt-layer'><i class='"+o[e.icon]+"'></i>                <span >"+t+"</span></div>",r=new Boxy(i,{modal:e.modal,draggable:!1,closeCallback:e.callback});return $(".moco-modal-layer").css("border-radius","8px"),setTimeout(function(){r.hide()},e.timeout),r},tipAlert:function(t,e){var o=$(".moco-tip-layer").remove();o=$('<div class="moco-modal-layer moco-tip-layer">').appendTo($("body"));var i={success:"moco-icon-tick-revert",error:"moco-icon-point-revert",question:"moco-icon-ques-revert"},e=$.extend({icon:"success",info:"",timeout:1e3},e),r="<i class='"+i[e.icon]+"'></i>                <span>"+e.info+"</span>";o.hide().html(r).css({top:$(t).offset().top-30,left:$(t).offset().left-15}),o.animate({top:$(t).offset().top-45,left:$(t).offset().left-15,opacity:"show"},300),setTimeout(function(){o.animate({opacity:"hide"},300),setTimeout(function(){o.remove()},1e3)},e.timeout)},tipConfirm:function(t,e){var o=$(".moco-tip-layer").remove();o=$('<div class="moco-modal-layer moco-tip-layer moco-tipconfirm-layer">').appendTo($("body"));var i={success:"moco-icon-tick-revert",error:"moco-icon-point-revert",question:"moco-icon-ques-revert"},e=$.extend({icon:"question",info:"",callback:function(){},cancelcallback:function(){}},e),r='<i class="'+i[e.icon]+'"></i>                <span class="moco-tipconfirm-info">'+e.info+'</span>                <a class="moco-btn moco-btn-gray-l js-modal-cancel" onclick="return false" href="javascript:void(0)"><i class="moco-icon-close"></i></a><a class="moco-btn moco-btn-dark js-modal-submit" onclick="return false" href="javascript:void(0)"><i class="moco-icon-check"></i></a>';o.hide().html(r).css({top:$(t).offset().top-30,left:$(t).offset().left-15}),o.animate({top:$(t).offset().top-45,left:$(t).offset().left-15,opacity:"show"},300),o.find(".js-modal-cancel").click(function(){o.remove(),e.cancelcallback()}),o.find(".js-modal-submit").click(function(){o.remove(),e.callback()})}})}),!function(){var t=window.moco||(window.moco={});t.getCoupon={params:{bigTitle:"恭喜您",smalleTitle:"助学礼包领取成功",apiType:"POST",apiCrossType:"false",closeCallback:function(){},failCallback:!1},AjaxClickGetCoupon:!0,init:function(e){$.extend(t.getCoupon.params,e),t.getCoupon.bindEvent()},couponHTMLStr:function(e){var o='<div class="moco-getcoupon-wrap js-moco-getcoupon-wrap moco-getcoupon-zoomIn">\t\t\t\t\t\t\t\t\t<div class="moco-getcoupon-top-img moco-getcoupon-zoomIn moco-getcoupon-zoomIn1"></div>\t\t\t\t\t\t\t\t\t<div class="moco-getcoupon-content-box">\t\t\t\t\t\t\t\t\t\t<p class="moco-getcoupon-big-title">'+t.getCoupon.params.bigTitle+'</p>\t\t\t\t\t\t\t\t\t\t<p class="moco-getcoupon-smalle-title">'+t.getCoupon.params.smalleTitle+"，获得<span>"+e.length+'</span>张优惠券</p>\t\t\t\t\t\t\t\t\t\t<div class="moco-getcoupon-coupon-smalle-box moco-getcoupon-coupon-scroll moco-getcoupon-fadeInUp">\t\t\t\t\t\t\t\t\t\t\t<ul class="moco-getcoupon-coupon-big-box moco-getcoupon-scroller">';return $.each(e,function(t,i){o+='<li class="moco-getcoupon-coupon-item ">\t\t\t\t\t\t\t\t\t<a href="//order.imooc.com/coupon" target="_blank">\t\t\t\t\t\t\t\t\t\t<div class="moco-getcoupon-coupon-face-value clearfix">\t\t\t\t\t\t\t\t\t\t\t<p class="l moco-getcoupon-face-value">￥'+e[t].face_price+'</p>\t\t\t\t\t\t\t\t\t\t\t<p class="l">满'+e[t].full_reduced_price+"可用</p>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t<p>适用于："+e[t].range_name+"</p>\t\t\t\t\t\t\t\t\t\t<p>有效期："+e[t].start_time+"-"+e[t].end_time+"</p>\t\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t</li>"}),o+='</ul>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="moco-getcoupon-fadeInUp1">\t\t\t\t\t\t\t<p class="moco-getcoupon-tip-text">优惠券已放入<a href="http://order.imooc.com/coupon" target="_blank">“我的优惠券”</a></p>\t\t\t\t\t\t\t<div class="moco-getcoupon-close-btn js-moco-getcoupon-close-btn">朕知道了</div>\t\t\t\t\t\t</div>'},ajaxGetCoupon:function(){var e="json",o="";1==t.getCoupon.params.apiCrossType&&(o="xhrFields: {withCredentials: true}"),t.getCoupon.AjaxClickGetCoupon=!1,$.ajax({url:t.getCoupon.params.api,type:t.getCoupon.params.apiType,dataType:e,data:t.getCoupon.params.apiData,success:function(e){if(0==e.result){var o=t.getCoupon.couponHTMLStr(e.data);$("body").append(o);var i="160px";e.data.length>1&&(i="240px"),$(".js-moco-getcoupon-wrap").find(".moco-getcoupon-coupon-smalle-box").css("height",i),$(".moco-getcoupon-loading").hide();var r=-$(".js-moco-getcoupon-wrap").height()/2;$(".js-moco-getcoupon-wrap").css("margin-top",r).show(),t.getCoupon.initScroller($(".moco-getcoupon-coupon-scroll")),t.getCoupon.AjaxClickGetCoupon=!0}else t.getCoupon.hideCoupon(),t.getCoupon.AjaxClickGetCoupon=!0,t.getCoupon.params.failCallback?t.getCoupon.params.failCallback(e):""!=e.msg?$.prompt(e.msg,{icon:"error"}):$.prompt("请求错误",{icon:"error"})}})},showCoupon:function(){var e='<div class="moco-getcoupon-block js-moco-getcoupon-block moco-getcoupon-fadeIn"></div>',o='<div class="moco-getcoupon-loading">\t\t\t\t\t\t  \t    <div class="moco-getcoupon-bounce1"></div>\t\t\t\t\t\t\t\t<div class="moco-getcoupon-bounce2"></div>\t\t\t\t\t\t\t\t<div class="moco-getcoupon-bounce3"></div>\t\t\t\t\t\t\t</div>',i=e+o;$("body").append(i),$(".js-moco-getcoupon-block").show(),$(".moco-getcoupon-loading").show(),t.getCoupon.ajaxGetCoupon()},hideCoupon:function(){$(".js-moco-getcoupon-block").remove(),$(".moco-getcoupon-loading").remove(),$(".js-moco-getcoupon-wrap").remove()},initScroller:function(t,e){var o=t,i=o.find(".moco-getcoupon-scroller"),r=o.height(),n=i.height();return o.hasClass("ps-container")?void setTimeout(function(){var t=o.scrollTop()||0;o[0].scrollTop=e===!0?0:t,o.perfectScrollbar("update")},0):void(n>r&&setTimeout(function(){o.perfectScrollbar({wheelSpeed:30,wheelPropagation:!1}),"function"==typeof e&&e()},0))},destroy:function(t){t.perfectScrollbar&&t.perfectScrollbar("destroy"),t.removeClass("ps-container")},update:function(t){t.perfectScrollbar&&t.perfectScrollbar("update")},bindEvent:function(){$("body").on("click",".js-moco-getcoupon",function(){t.getCoupon.AjaxClickGetCoupon||$.prompt("响应中~ 请稍后",{icon:"error"}),t.getCoupon.showCoupon()}),$("body").on("click",".js-moco-getcoupon-close-btn",function(){t.getCoupon.hideCoupon(),t.getCoupon.params.closeCallback()})}}}(),!function(){var t=window.moco||(window.moco={}),e=function(t){return"[object Array]"===Object.prototype.toString.apply(t)},o=new RegExp("[\\u4E00-\\u9FFF]+","g"),i=function(t,e){this.Parent=t,this.init(e)};i.prototype={init:function(t){var e=this;$(e.Parent).find("img").css("cursor","pointer");var i="img",r=e.Parent;if(t){r="body";var i=e.Parent+" img"}$(r).on("click",i,function(){if(!$(this).hasClass("nopreview")){o.test($(this).attr("data-src"))&&$(this).attr("data-src",$(this).attr("src"));var t=["<div id='imgPreview' class='imgPreview'>","<img class='nopreview' />","</div>","<div id='imgPreviewMake' class='imgPreview-make'></div>","<div id='imgPreviewHandle' class='imgPreviewHandle'>","<a target='_blank' class='viewOriginalImg' href=''>","<span class='viewOriginalImgText'>查看原图</span>","</a>","<span class='imgPreview-btn next moco-icon-right'></span>","<span class='imgPreview-btn prev moco-icon-left'></span>","<i title='关闭' class='imgPreview-close moco-icon-close2'></i>","</div>"].join("");return $("body").append(t),e.Preview(this),!1}})},currentimg:null,Preview:function(t,e){var o=this;o.currentimg=t,$("#imgPreview img").attr("src","");var i=$(t).attr("data-src")||$(t).attr("data-original");i||(i=$(t).attr("src")),i=this.imageSrc(i,$(t).attr("src")),$("#imgPreviewHandle .viewOriginalImg").attr("href",i);var r=new Image;r.onload=function(){var t=$(window).width(),e=$(window).height(),r=this.width,n=this.height,a=t/e,s=r/n;a>s?n>e&&(n=parseInt(e-100),r=parseInt(n*s)):r>t&&(r=parseInt(t-100),n=parseInt(r/s));var c="height: "+n+"px; width: "+r+"px; margin-left: "+-r/2+"px; margin-top: "+-n/2+"px; display: block;";$("#imgPreview").removeClass("pngshow").show(),o.Switch("btn"),setTimeout(function(){$("#imgPreview").addClass("pngshow").attr("style",c),$("#imgPreview img").attr("src",i)},300)},e||o.bindEvent(),r.src=i},imageSrc:function(t,e){if(t&&t.indexOf("//")!=-1||(t=e),t.indexOf("mukewang.com")!=-1||t.indexOf("imooc.com")!=-1){var o=t.substr(t.lastIndexOf("."));return t=t.split(o)[0],t.indexOf("-")!=-1&&(t=t.slice(0,t.indexOf("-"))),t+""+o}return t},bindEvent:function(){var t=this,e=function(){$("#imgPreview").remove(),$("#imgPreviewMake").remove(),$("#imgPreviewHandle").remove()};$("#imgPreviewHandle .imgPreview-close").on("click",function(t){e(),t.stopPropagation()}),$("#imgPreviewHandle .next").on("click",function(e){t.Switch("next"),e.stopPropagation()}),$("#imgPreviewHandle .prev").on("click",function(e){t.Switch("prev"),e.stopPropagation()}),$("#imgPreviewHandle").on("click",function(){e()}),$("#imgPreviewHandle .viewOriginalImg").on("click",function(t){t.stopPropagation()})},Switch:function(t){var e,o=this,i=$(o.currentimg).data("moco");e=i?$(o.Parent).find('[data-moco="'+i+'"]'):$(o.Parent).find("img:not(.nopreview)"),e.length>1?($("#imgPreviewHandle .imgPreview-btn").show(),e.each(function(i){if(o.currentimg==this){if("next"==t){if(i<e.length-1){var r=e[i+1];o.Preview(r,!0)}}else if("prev"==t&&0!=i){var r=e[i-1];o.Preview(r,!0)}return"btn"==t&&(i==e.length-1&&$(".imgPreview-btn.next").hide(),0==i&&$(".imgPreview-btn.prev").hide()),!1}})):$("#imgPreviewHandle .imgPreview-btn").hide()}},t.imagePreview={init:function(t,o){if(!e(t))return new i(t,o);for(var r=t,n=0;n<r.length;n++)new i(t[n],o)}}}(window),!function(t){"function"==typeof define&&"function"!=typeof jQuery?define(["jquery"],t):t(jQuery)}(function(t){var e={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0};t.fn.perfectScrollbar=function(o,i){return this.each(function(){var r=t.extend(!0,{},e),n=t(this);if("object"==typeof o?t.extend(!0,r,o):i=o,"update"===i)return n.data("perfect-scrollbar-update")&&n.data("perfect-scrollbar-update")(),n;if("destroy"===i)return n.data("perfect-scrollbar-destroy")&&n.data("perfect-scrollbar-destroy")(),n;if(n.data("perfect-scrollbar"))return n.data("perfect-scrollbar");n.addClass("ps-container");var a,s,c,l,d,u,p,h,m,f,g=t("<div class='ps-scrollbar-x-rail'></div>").appendTo(n),v=t("<div class='ps-scrollbar-y-rail'></div>").appendTo(n),b=t("<div class='ps-scrollbar-x'></div>").appendTo(g),w=t("<div class='ps-scrollbar-y'></div>").appendTo(v),x=parseInt(g.css("bottom"),10),y=parseInt(v.css("right"),10),$=function(){var t=parseInt(f*(u-l)/(l-m),10);n.scrollTop(t),g.css({bottom:x-t})},k=function(){var t=parseInt(h*(d-c)/(c-p),10);n.scrollLeft(t),v.css({right:y-t})},C=function(t){return r.minScrollbarLength&&(t=Math.max(t,r.minScrollbarLength)),t},T=function(){g.css({left:n.scrollLeft(),bottom:x-n.scrollTop(),width:c}),v.css({top:n.scrollTop(),right:y-n.scrollLeft(),height:l}),b.css({left:h,width:p}),w.css({top:f,height:m})},_=function(){c=n.width(),l=n.height(),d=n.prop("scrollWidth"),u=n.prop("scrollHeight"),d>c?(a=!0,p=C(parseInt(c*c/d,10)),h=parseInt(n.scrollLeft()*(c-p)/(d-c),10)):(a=!1,p=0,h=0,n.scrollLeft(0)),u>l?(s=!0,m=C(parseInt(l*l/u,10)),f=parseInt(n.scrollTop()*(l-m)/(u-l),10)):(s=!1,m=0,f=0,n.scrollTop(0)),f>=l-m&&(f=l-m),h>=c-p&&(h=c-p),T()},H=function(t,e){var o=t+e,i=c-p;h=0>o?0:o>i?i:o,g.css({left:n.scrollLeft()}),b.css({left:h})},j=function(t,e){var o=t+e,i=l-m;f=0>o?0:o>i?i:o,v.css({top:n.scrollTop()}),w.css({top:f})},I=function(){var e,o;b.bind("mousedown.perfect-scrollbar",function(t){o=t.pageX,e=b.position().left,g.addClass("in-scrolling"),t.stopPropagation(),t.preventDefault()}),t(document).bind("mousemove.perfect-scrollbar",function(t){g.hasClass("in-scrolling")&&(k(),H(e,t.pageX-o),t.stopPropagation(),t.preventDefault())}),t(document).bind("mouseup.perfect-scrollbar",function(){g.hasClass("in-scrolling")&&g.removeClass("in-scrolling")}),e=o=null},P=function(){var e,o;w.bind("mousedown.perfect-scrollbar",function(t){o=t.pageY,e=w.position().top,v.addClass("in-scrolling"),t.stopPropagation(),t.preventDefault()}),t(document).bind("mousemove.perfect-scrollbar",function(t){v.hasClass("in-scrolling")&&($(),j(e,t.pageY-o),t.stopPropagation(),t.preventDefault())}),t(document).bind("mouseup.perfect-scrollbar",function(){v.hasClass("in-scrolling")&&v.removeClass("in-scrolling")}),e=o=null},B=function(){var t=function(t,e){var o=n.scrollTop();if(0===o&&e>0&&0===t)return!r.wheelPropagation;if(o>=u-l&&0>e&&0===t)return!r.wheelPropagation;var i=n.scrollLeft();return 0===i&&0>t&&0===e?!r.wheelPropagation:!(i>=d-c&&t>0&&0===e)||!r.wheelPropagation},e=!1;n.bind("mousewheel.perfect-scrollbar",function(o,i,c,l){r.useBothWheelAxes?s&&!a?l?n.scrollTop(n.scrollTop()-l*r.wheelSpeed):n.scrollTop(n.scrollTop()+c*r.wheelSpeed):a&&!s&&(c?n.scrollLeft(n.scrollLeft()+c*r.wheelSpeed):n.scrollLeft(n.scrollLeft()-l*r.wheelSpeed)):(n.scrollTop(n.scrollTop()-l*r.wheelSpeed),n.scrollLeft(n.scrollLeft()+c*r.wheelSpeed)),_(),e=t(c,l),e&&o.preventDefault()}),n.bind("MozMousePixelScroll.perfect-scrollbar",function(t){e&&t.preventDefault()})},D=function(){var e=function(t,e){var o=n.scrollTop();if(0===o&&e>0&&0===t)return!1;if(o>=u-l&&0>e&&0===t)return!1;var i=n.scrollLeft();return!(0===i&&0>t&&0===e)&&!(i>=d-c&&t>0&&0===e)},o=!1;n.bind("mouseenter.perfect-scrollbar",function(){o=!0}),n.bind("mouseleave.perfect-scrollbar",function(){o=!1});var i=!1;t(document).bind("keydown.perfect-scrollbar",function(t){if(o){var a=0,s=0;switch(t.which){case 37:a=-3;break;case 38:s=3;break;case 39:a=3;break;case 40:s=-3;break;default:return}n.scrollTop(n.scrollTop()-s*r.wheelSpeed),n.scrollLeft(n.scrollLeft()+a*r.wheelSpeed),_(),i=e(a,s),i&&t.preventDefault()}})},S=function(){var t=function(t){t.stopPropagation()};w.bind("click.perfect-scrollbar",t),v.bind("click.perfect-scrollbar",function(t){var e=parseInt(m/2,10),o=t.pageY-v.offset().top-e,i=l-m,r=o/i;0>r?r=0:r>1&&(r=1),n.scrollTop((u-l)*r),_()}),b.bind("click.perfect-scrollbar",t),g.bind("click.perfect-scrollbar",function(t){var e=parseInt(p/2,10),o=t.pageX-g.offset().left-e,i=c-p,r=o/i;0>r?r=0:r>1&&(r=1),n.scrollLeft((d-c)*r),_()})},L=function(){var e=function(t,e){n.scrollTop(n.scrollTop()-e),n.scrollLeft(n.scrollLeft()-t),_()},o={},i=0,r={},a=null,s=!1;t(window).bind("touchstart.perfect-scrollbar",function(){s=!0}),t(window).bind("touchend.perfect-scrollbar",function(){s=!1}),n.bind("touchstart.perfect-scrollbar",function(t){var e=t.originalEvent.targetTouches[0];o.pageX=e.pageX,o.pageY=e.pageY,i=(new Date).getTime(),null!==a&&clearInterval(a),t.stopPropagation()}),n.bind("touchmove.perfect-scrollbar",function(t){if(!s&&1===t.originalEvent.targetTouches.length){var n=t.originalEvent.targetTouches[0],a={};a.pageX=n.pageX,a.pageY=n.pageY;var c=a.pageX-o.pageX,l=a.pageY-o.pageY;e(c,l),o=a;var d=(new Date).getTime();r.x=c/(d-i),r.y=l/(d-i),i=d,t.preventDefault()}}),n.bind("touchend.perfect-scrollbar",function(){clearInterval(a),a=setInterval(function(){return.01>Math.abs(r.x)&&.01>Math.abs(r.y)?void clearInterval(a):(e(30*r.x,30*r.y),r.x*=.8,void(r.y*=.8))},10)})},z=function(){n.unbind(".perfect-scrollbar"),t(window).unbind(".perfect-scrollbar"),t(document).unbind(".perfect-scrollbar"),n.data("perfect-scrollbar",null),n.data("perfect-scrollbar-update",null),n.data("perfect-scrollbar-destroy",null),b.remove(),w.remove(),g.remove(),v.remove(),b=w=c=l=d=u=p=h=x=m=f=y=null},A=function(e){n.addClass("ie").addClass("ie"+e);var o=function(){var e=function(){t(this).addClass("hover")},o=function(){t(this).removeClass("hover")};n.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",o),g.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",o),v.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",o),b.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",o),w.bind("mouseenter.perfect-scrollbar",e).bind("mouseleave.perfect-scrollbar",o)},i=function(){T=function(){b.css({left:h+n.scrollLeft(),bottom:x,width:p}),w.css({top:f+n.scrollTop(),right:y,height:m}),b.hide().show(),w.hide().show()},$=function(){var t=parseInt(f*u/l,10);n.scrollTop(t),b.css({bottom:x}),b.hide().show()},k=function(){var t=parseInt(h*d/c,10);n.scrollLeft(t),w.hide().show()}};6===e&&(o(),i())},E="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,O=function(){var t=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);t&&"msie"===t[1]&&A(parseInt(t[2],10)),_(),I(),P(),S(),E&&L(),n.mousewheel&&B(),r.useKeyboard&&D(),n.data("perfect-scrollbar",n),n.data("perfect-scrollbar-update",_),n.data("perfect-scrollbar-destroy",z)};return O(),n})}}),function(t){function e(e){var o=e||window.event,i=[].slice.call(arguments,1),r=0,n=0,a=0;return e=t.event.fix(o),e.type="mousewheel",o.wheelDelta&&(r=o.wheelDelta/120),o.detail&&(r=-o.detail/3),a=r,void 0!==o.axis&&o.axis===o.HORIZONTAL_AXIS&&(a=0,n=-1*r),void 0!==o.wheelDeltaY&&(a=o.wheelDeltaY/120),void 0!==o.wheelDeltaX&&(n=-1*o.wheelDeltaX/120),i.unshift(e,r,n,a),(t.event.dispatch||t.event.handle).apply(this,i)}var o=["DOMMouseScroll","mousewheel"];if(t.event.fixHooks)for(var i=o.length;i;)t.event.fixHooks[o[--i]]=t.event.mouseHooks;t.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=o.length;t;)this.addEventListener(o[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=o.length;t;)this.removeEventListener(o[--t],e,!1);else this.onmousewheel=null}},t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),!function(){function t(t){this.position={},this.hashow=!1,this.forword="top",this.timer=null,this.initialize(),this._bindEvent(),this.forceForword=!1,this.mocoUsercardDialog=$(".moco-usercard-dialog")}t.prototype={initialize:function(){$("body").append("<div class='moco-usercard-dialog js-moco-usercard-modal'></div>")},render:function(t){this.mocoUsercardDialog.empty(),this.mocoUsercardDialog.append(t.domtext),this.mocoUsercardDialog.show();var e=($(document).scrollTop(),$(window).height(),this.position.top-$(document).scrollTop()),o=($(document).scrollLeft(),$(window).width(),this.position.left-$(document).scrollLeft());this.forceForword?this.forword=this.forceForword:e<t.height?o>t.width&&e>t.height/2?this.forword="right":this.forword="bottom":this.forword="top","top"==this.forword&&(this.mocoUsercardDialog.css("top",this.position.top-t.height-20),this.mocoUsercardDialog.css("left",this.position.left-t.width/2+t.headWidth/2)),"bottom"==this.forword&&(this.mocoUsercardDialog.css("top",this.position.top+t.headHeight+20),this.mocoUsercardDialog.css("left",this.position.left-t.width/2+t.headWidth/2)),"right"==this.forword&&(this.mocoUsercardDialog.css("top",this.position.top-t.height/2),this.mocoUsercardDialog.css("left",this.position.left+t.headWidth+20)),"left"==this.forword&&(this.mocoUsercardDialog.css("top",this.position.top-t.height/2),this.mocoUsercardDialog.css("left",this.position.left-t.width-20)),this.mocoUsercardDialog.css("width",t.width),this.mocoUsercardDialog.css("height",t.height),this.hashow=!0,this.forceForword=!1},culPosition:function(t){this.position.top=t.top,this.position.left=t.left},show:function(t,e){this.hashow||(this.culPosition($(t.currentTarget).offset()),this.render(e))},hide:function(){$("body").find(".moco-usercard-dialog").hide(),this.hashow=!1},setForceForword:function(t){this.forceForword=t},_bindEvent:function(){var t=this;$(document).delegate(".js-moco-usercard-modal","mouseover",function(e){clearTimeout(t.timer)}),$(document).delegate(".js-moco-usercard-modal","mouseleave",function(e){t.hide()})}},window.usersInfoCache=[];var e=this,o="",i=!1,r=!1;this.usercardDialogDom=function(t){var e={dialogbk:"user_dialogbk",signature:"",is_follows:"关注Ta",icon:"icon-group_add",roleText:"",detailNum:"",sexClass:"",cssClass:"moco-usercard-mc-btn-success js-usercard-add-attention",_funsDom:'<a href="/u/'+t.uid+'/fans">\t\t\t\t\t\t\t<div class="moco-usercard-detail-right bold">粉丝\t\t\t\t\t\t\t\t<span>'+t.fans_num+"</span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</a>"},o=$.extend(e,o);o.signature=t.sign,o.detailNum='<a href="/u/'+t.uid+'/follows">\t\t\t\t\t\t\t\t<div class="moco-usercard-detail-left bold">关注\t\t\t\t\t\t\t\t\t<span>'+t.follows_num+"</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t"+o._funsDom,2==t.user_type?(o.dialogbk="teacher_dialogbk",o.roleText+='<span class="moco-usercard-signicon moco-usercard-teacher"></span>',o.detailNum='<a href="/u/'+t.uid+'/courses?sort=publish">\t\t\t\t\t\t\t\t\t<div class="moco-usercard-detail-left bold">课程\t\t\t\t\t\t\t\t\t\t<span>'+t.course_num+"</span>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t"+o._funsDom,
o.signature=t.aboutme,1==t.is_author&&(o.roleText+='<span class="moco-usercard-signicon moco-usercard-author"></span>'),1==t.is_mustar&&(o.roleText+='<span class="moco-usercard-signicon moco-usercard-mxr"></span>')):(1==t.is_author&&(o.dialogbk="author_dialogbk",o.roleText+='<span class="moco-usercard-signicon moco-usercard-author"></span>',o.detailNum='<a href="/u/'+t.uid+'/articles">\t\t\t\t\t\t\t\t\t\t<div class="moco-usercard-detail-left bold">手记\t\t\t\t\t\t\t\t\t\t\t<span>'+t.article_num+'</span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t\t<a href="/u/'+t.uid+'/articles?type=praise">\t\t\t\t\t\t\t\t\t\t<div class="moco-usercard-detail-right bold">推荐\t\t\t\t\t\t\t\t\t\t\t<span class="ml10">'+t.article_recommend_num+"</span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</a>"),1==t.is_mustar&&(o.roleText+='<span class="moco-usercard-signicon moco-usercard-mxr"></span>'),1e4==t.uid&&(o.detailNum='<a href="javascript:void(0);">\t\t\t\t\t\t\t\t\t\t<div class="moco-usercard-detail-left bold">关注\t\t\t\t\t\t\t\t\t\t\t<span class="ml10">'+t.follows_num+"</span>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</a>\t\t\t\t\t\t\t\t\t"+o._funsDom)),2==t.sex?o.sexClass="moco-usercard-girl":1==t.sex?o.sexClass="moco-usercard-boy":o.sexClass="moco-usercard-secret",1==t.is_follows&&(o.is_follows="发消息",o.icon="icon-mail",o.cssClass="moco-usercard-mc-btn-primary js-usercard-send-message"),""==o.signature?o.signature="这位同学很懒，木有签名的说～":o.signature.length>45&&(o.signature=o.signature.slice(0,45)+"...");var i='<div class="moco-usercard-headialog js-usercard-headialog" style="background: url(/static/img/u/'+o.dialogbk+'.png) no-repeat 0 0;">\t\t\t\t\t\t<a href="/u/'+t.uid+'" target="_blank">\t\t\t\t\t\t\t<img src="http://img.mukewang.com/'+t.portrait+'-40-40.jpg" class="moco-usercard-head" width="40" height="40">\t\t\t\t\t\t</a>\t\t\t\t\t\t<p class="fs16 bold mt0">\t\t\t\t\t\t\t<a href="/u/'+t.uid+'" target="_blank"><span>'+t.nickname+"</span> </a>"+o.roleText+'</p>\t\t\t\t\t\t<p class="fs12 moco-usercard-job-title">\t\t\t\t\t\t\t<span class="moco-usercard-gender mr10 '+o.sexClass+'"></span>\t\t\t\t\t\t\t'+t.job_title+'\t\t\t\t\t\t</p>\t\t\t\t\t\t<p class="fs12 moco-usercard-signature">'+o.signature+"</p>\t\t\t\t\t\t<div> "+o.detailNum+'</div>\t\t\t\t\t\t<span class="moco-usercard-mc-btn '+o.cssClass+' pl30 pr30 mt20 " dataid='+t.uid+'>\t\t\t\t\t\t\t<i class="'+o.icon+' moco-usercard-btn-icon"> </i>'+o.is_follows+' \t\t\t\t\t\t</span>\t\t\t\t\t\t<p class="moco-usercard-add-attention-error"></p>\t\t\t\t\t</div>';return i},$(".js-usercard-box").delegate(".js-usercard-dialog","mouseover",function(n){var a=$(this),s=a.data("userid");location.hostname.indexOf("10.96.141.76")==-1&&0!=isLogin&&OP_CONFIG.userInfo.uid==s||(o||(o=new t),r=!1,setTimeout(function(){if(!r){var t=a.width(),c=a.height();if(void 0===usersInfoCache[s]){if(location.hostname.indexOf("10.96.141.76")!=-1){var l={uid:1e4,nickname:"慕女神",portrait:"57a322f00001e4ae02560256",sign:"各位亲，我真不是机器人，好伐",aboutme:"2048源代码征集活动火爆进行中，欢迎大家参加！",user_type:"2",sex:"2",job_title:"全栈工程师",is_follows:1,is_fans:1,follows_num:99,fans_num:9999999,is_mustar:0,is_author:1,course_num:0,article_num:"10",article_recommend_num:"16",mp:"631",credit:"22",n_learn:"38小时47分钟"};usersInfoCache[s]=l;var d=e.usercardDialogDom(l),u=$(".js-usercard-headialog");return u.css("background","url(images/teacher_dialogbk.png)"),u.find(".moco-usercard-head").attr("src","images/imoocGril.jpg"),u.find(".moco-usercard-teacher").css("background","url(images/user-info-icon-little.png) 0 -18px"),u.find(".moco-usercard-author").css("background","url(images/user-info-icon-little.png) 0 -40px"),u.find(".moco-usercard-girl").css("background","url(images/gender.png) 0 -16px"),void o.show(n,{width:340,height:308,domtext:d,headWidth:t,headHeight:c})}i||(i=!0,$.ajax({type:"GET",url:"/u/gethoveruser?uid="+s,dataType:"json",success:function(i){if(1==i.result){usersInfoCache[s]=i.data;var r=e.usercardDialogDom(i.data);o.show(n,{width:340,height:308,domtext:r,headWidth:t,headHeight:c})}},complete:function(){i=!1}}))}else{var d=e.usercardDialogDom(usersInfoCache[s]);o.show(n,{width:340,height:308,domtext:d,headWidth:t,headHeight:c})}}},200))}),$(document).on("click",".js-usercard-send-message",function(t){if($(".moco-usercard-add-attention-error").text(""),OP_CONFIG.userInfo){var e=$(t.currentTarget).attr("dataid");window.open("/u/"+OP_CONFIG.userInfo.uid+"/messages?uid="+e)}else seajs.use("login_sns",function(t){t.init()})}),$(document).on("click",".js-usercard-add-attention",function(t){if($(".moco-usercard-add-attention-error").text(""),OP_CONFIG.userInfo){var e=$(t.currentTarget).attr("dataid");$.ajax({type:"POST",url:"/u/"+OP_CONFIG.userInfo.uid+"/ajaxfollows?uid="+e+"x&type=1",dataType:"json",success:function(t){1101==t.result&&($(".js-usercard-add-attention").html('<i class="icon-mail moco-usercard-btn-icon"> </i>发消息'),$(".js-usercard-add-attention").removeClass("moco-usercard-mc-btn-success js-usercard-add-attention").addClass(" moco-usercard-mc-btn-primary js-usercard-send-message")),1103==t.result&&$(".moco-usercard-add-attention-error").text("已经是好友"),1100==t.result&&$(".moco-usercard-add-attention-error").text("关注失败"),usersInfoCache[e].is_follows=1},error:function(t){$(".moco-usercard-add-attention-error").html("服务错误，稍后重试")},complete:function(){}})}else seajs.use("login_sns",function(t){t.init()})}),$(".js-usercard-box").delegate(".js-usercard-dialog","mouseleave",function(t){o.timer=setTimeout(function(){o.hide()},500),r=!0})}(),!function(t,e){moco.validateCallback={},W={},W.ValidaterClass=function(){this.validateRules={"require-word":{type:"regex",extract:"value",regex:/^[^._$]+$/g,errorHint:'格式不正确，请输入除".","_"和"$"以外的字符'},"require-letter":{type:"regex",extract:"value",regex:/^[a-zA-Z0-9_]+$/g,errorHint:"格式不正确，请输入字母、数字、下划线"},"require-int":{type:"regex",extract:"value",regex:/^-?\d+$/g,errorHint:"格式不正确，请输入整数"},"require-positive-int":{type:"regex",extract:"value",regex:/^[1-9][0-9]*$/g,errorHint:"格式不正确，请输入正整数"},"require-nonnegative":{type:"regex",extract:"value",regex:/^\d+$/g,errorHint:"请输入非负整数"},"require-float":{type:"regex",extract:"value",regex:/^\d{1,5}(\.\d{1,2})?$/g,errorHint:"格式不正确，请输入'3.14'或'5'这样的数字"},"require-float-three":{type:"regex",extract:"value",regex:/^\d{1,5}(\.\d{1,3})?$/g,errorHint:"格式不正确，请输入'3.147'或'5'这样的数字"},"require-float-one":{type:"regex",extract:"value",regex:/^\d{1,5}(\.\d{0,1})?$/g,errorHint:"格式不正确，请输入'3.147'或'5'这样的数字"},"require-price":{type:"regex",extract:"value",regex:/^\d+(\.\d{0,2})?$/g,errorHint:"价格不正确，请输入0-999999999之间的价格"},"require-date":{type:"regex",extract:"value",regex:/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/g,errorHint:"输入格式为2013-01-01的日期"},"require-percent":{type:"regex",extract:"value",regex:/^([1-9]|[1-9]\d|100)$/g,errorHint:"格式不正确，请输入1-100的整数"},"require-tel-phone":{type:"regex",extract:"value",regex:/^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/g,errorHint:"输入的电话号码有错误。区号和电话号码之间请用-分割"},"require-email":{type:"regex",extract:"value",regex:/^[a-zA-Z0-9]+([._\-]*[a-zA-Z0-9]+)*@([a-zA-Z0-9]+([._\-][a-zA-Z0-9]+))+$/,errorHint:"邮箱格式错误"},"require-mobile-phone":{type:"regex",extract:"value",regex:/^(13[0-9]|14[56789]|15[012356789]|16[6]|17[0-9]|18[0-9]|19[89])[0-9]{8}$/g,errorHint:"手机号格式错误"},"require-password":{type:"regex",extract:"value",regex:/^[\w~`!@#$%&*.,()_+<>?:"'+*\/\-\^\\\][{}]{6,16}$/,errorHint:"请输入6-16位密码，区分大小写，不能使用空格！"},"require-nick":{type:"regex",extract:"value",regex:/^[\w\u4E00-\u9FA5]{2,18}$/,errorHint:"昵称2-18位中英文、数字及下划线！"},"require-notempty":{type:"function",extract:"element",check:function(e){var o=t.trim(e.val());return 0!=o.length||(this.errorHint="内容不能为空",!1)},errorHint:""},"require-element-exist":{type:"function",extract:"element",check:function(t){var e=t.data("selector");return t.find(e).length>0}},"require-string":{type:"function",extract:"element",check:function(e){var o=t.trim(e.val());"true"==e.attr("contenteditable")&&(o=e.attr("value"));var i=e.data("minlength")||e.data("min-length")||1,r=e.data("maxlength")||e.data("max-length")||9999999,n=o.length;return!(n<i||n>r)||(9999999==r?this.errorHint="输入值长度必须大于等于"+i:this.errorHint="请输入长度在"+i+"到"+r+"之间的字符串",!1)},errorHint:""},"require-select":{type:"function",extract:"value",check:function(e){var o=t.trim(e);return 0!=o.length&&"-1"!==o},errorHint:"请选择一个选项"},"require-select-positive-option":{type:"function",extract:"value",check:function(t){var t=parseInt(t);return!(t<0)},errorHint:"请选择一个选项"},"require-custom-function":{type:"function",extract:"element",check:function(t){var e=t.attr("data-validate-function"),o=window[e](t);return this.errorHint=o.errorHint,o.isValidate||this.errorHint||(this.errorHint="请在data-validate-function函数中返回errorHint"),o.isValidate}},"require-file":{type:"function",extract:"value",check:function(t){return 0!=t.length},errorHint:"请选择一份文件"},"require-length":{type:"function",extract:"element",check:function(e){var o=t.trim(e.val());"true"==e.attr("contenteditable")&&(o=e.attr("value"));var i=parseInt(e.attr("strlength"))||parseInt(e.attr("str-length")),r=o.length;return r===i||(this.errorHint="请输入长度为"+i+"的字符串",!1)},errorHint:""}},this.getRule=function(t){return this.validateRules[t]}},W.Validater=new W.ValidaterClass,W.validate=function(e,o){var i=[];e?e.attr("data-validate")?i.push(e):i.push(e.find("[data-validate]")):i.push(t("[data-validate]"));for(var r=!1,n=i.length,a=null,s=0;s<n;++s){var c=i[s];c.each(function(){var e=t(this);if(!(e.is(":visible")&&"hidden"!=e.css("visibility")||e.data("forceValidate")))return void W.validate.toggleErrorHint(e,!0);var o=e.val(),i=e.attr("data-validate");if(i)for(var n=i.split(",,"),s=n.length,c=0;c<s;++c){var l=t.trim(n[c]);if("norequire"==l&&0==o.length){W.validate.toggleErrorHint(e,!0);break}var d=l.split("::"),u=null,p=null,h=null;2===d.length?(u=d[0],h=d[1]):u=d[0];var m=u.indexOf("(");m!==-1&&(d=u.split("("),u=d[0],p=d[1].substring(0,d[1].length-1).split(","));var f=W.Validater.getRule(u);if(f)if("function"===f.type){var g=o,v=e;if("element"==f.extract&&(g=e),!f.check.call(f,g,p))return r=!0,a=h?h:f.errorHint,W.validate.toggleErrorHint(v,!1,a),!0;var b=e.attr("data-callback");if(b&&moco.validateCallback&&moco.validateCallback[b]){var w=e.val();if(moco.validateCallback.errorHint="",moco.validateCallback[b](w),!moco.validateCallback.rel)return r=!0,W.validate.toggleErrorHint(v,!1,moco.validateCallback.errorHint,!0),!0;W.validate.toggleErrorHint(v,!0),r=!1}else r=!1,W.validate.toggleErrorHint(v,!0)}else if("regex"===f.type){var v=e;if(!o.match(f.regex))return r=!0,a=h?h:f.errorHint,W.validate.toggleErrorHint(v,!1,a),!0;var b=e.attr("data-callback");if(b&&moco.validateCallback&&moco.validateCallback[b]){var w=e.val();if(moco.validateCallback.errorHint="",moco.validateCallback[b](w),!moco.validateCallback.rel)return r=!0,W.validate.toggleErrorHint(v,!1,moco.validateCallback.errorHint,!0),!0;W.validate.toggleErrorHint(v,!0),r=!1}else r=!1,W.validate.toggleErrorHint(v,!0);if(r)return!1}}})}return!r},W.validate.toggleErrorHint=function(o,i,r,n){if(o){var a=o.siblings(".errorHint");if(0==a.length){var s=o.parent();a=s.find(".errorHint")}if(0==a.length&&(a=o.parents(".xa-errorHintContainer").find(".errorHint")),0==a.length&&(a=o.parents(".x-errorHintContainer").find(".errorHint")),0==a.length){var c=o.data("errorHintTarget");c&&(a=t(c))}if(a.length>0)if(i)a.html("");else{var l=a.data("errorHint");n||l&&(r=l),a.html(r).show()}i||o.attr("errorhint-value")==e||o.attr("errorhint-value",r);var d=o.parent(),u="input"===o.get(0).tagName.toLowerCase();u&&(i?d.removeClass("has-error"):d.addClass("has-error"))}},t(document).delegate("input[data-validate]","blur",function(e){W.validate(t(e.currentTarget).parent())})}(jQuery);